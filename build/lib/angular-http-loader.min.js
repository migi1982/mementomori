angular.module("ng.httpLoader",["ng.httpLoader.httpMethodInterceptor"]).directive("ngHttpLoader",["$rootScope","$parse","$timeout",function(a,b,c){return{scope:{methods:"@",template:"@",title:"@",ttl:"@"},template:'<div class="http-loader__wrapper" ng-include="template" ng-show="showLoader"></div>',link:function(d){var e=b(d.methods)()||d.methods;e=angular.isUndefined(e)?[]:e,e=angular.isArray(e)?e:[e],angular.forEach(e,function(a,b){e[b]=a.toUpperCase()});var f=b(d.ttl)()||d.ttl;f=angular.isUndefined(f)?0:f,f=1e3*Number(f),f=angular.isNumber(f)?f:0,Array.prototype.indexOf||(e.indexOf=function(a){for(var b=this.length;b--;)if(this[b]===a)return b;return-1}),d.showLoader=!1;var g,h=d.showLoader,i=function(a,b){return-1!==e.indexOf(b.toUpperCase())?h="loaderShow"===a.name:0===e.length&&(h="loaderShow"===a.name),0>=f||!g&&!h?void(d.showLoader=h):void(g||(d.showLoader=h,g=c(function(){h||(d.showLoader=h),g=void 0},f)))};a.$on("loaderShow",i),a.$on("loaderHide",i)}}}]),angular.module("ng.httpLoader.httpMethodInterceptor",[]).provider("httpMethodInterceptor",function(){var a=[];this.whitelistDomain=function(b){a.push(b)},this.$get=["$q","$rootScope",function(b,c){var d=0,e=function(b){for(var c=a.length;c--;)if(-1!==b.indexOf(a[c]))return!0;return!1},f=function(a){e(a.url)&&0===--d&&c.$emit("loaderHide",a.method)};return{request:function(a){return e(a.url)&&(d++,c.$emit("loaderShow",a.method)),a||b.when(a)},response:function(a){return f(a.config),a||b.when(a)},responseError:function(a){return f(a.config),b.reject(a)}}}]}).config(["$httpProvider",function(a){a.interceptors.push("httpMethodInterceptor")}]);